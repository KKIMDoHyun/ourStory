# OurStory

## 2021-09-13

### <활동>

- 프로젝트 생성 및 환경 구성(vuetify, eslint 등)
- strapi를 활용하여 가상 DB 구축
- 회원가입 및 로그인 기능 구현

### <막혔던 점>

- strapi를 처음 사용해봤기 때문에 공부하는데 시간이 오래걸렸다.
- 회원가입을 진행할 때 strapi의 어떤 주소로 데이터를 post 해야되는지 헤맸다.
- 로그인을 할 때 토큰을 받아와서 저장해야 되는데, 값이 계속 빈 값으로 들어갔다. 또한 새로고침을 하면 로그인 상태가 유지되지 않았다.

> 해결: strapi에서 처음으로 제공되는 주소인 /auth/local로 post를 하면 로그인이 되고, /auth/local/register로 post를 하면 회원가입이 되었다. 이를 이용하여 로그인 및 회원가입을 구현하였다. 로그인을 할 때 store에 있는 빈 token값이 먼저 저장되고 로그인이 되어서 빈 값이 나온 것이었다. 이를 axios의 interceptors를 이용하여 먼저 store에 값을 저장하고 이 값을 headers에 넣어주도록 하였다. 로그인 상태를 유지시키기 위해서 localStorage에 저장하는 방법과 쿠키를 저장하는 방법이 있는데, localStorage는 보안상 쿠키보다 덜 하기 때문에 쿠키에 저장하는 방법을 택했다.
---

## 2021-09-14

### <활동>

- 로그인 시 사용자의 고유 id값을 쿠키에 저장하고 이 쿠키를 이용하여 사용자 정보를 가져와서 뿌려줌
- 쿠키에도 사용자 정보를 저장함(필요한지 고민 중)

### <막혔던 점>

- 사용자 정보를 가져올 때 api파일에 주소를 설정하고 store의 actions에서 api를 불러온 뒤 myPage에서 dispatch를 이용하여 데이터를 가져오려 했는데, 인증되지 않았다는 오류가 떠서 하지 못했다. 

> 해결: 우선 myPage에서 created에 axios.get으로 사용자 정보를 가져와서 뿌려주었다. store의 actions를 이용한 비즈니스 로직으로 바꾸는 작업을 생각해봐야겠다.

---

## 2021-09-15

### <활동>

- TopBar 디자인 변경
- 로그인과 회원가입을 모달 창으로 띄우도록 구조 바꿈
- myPage 들어갈 때 spinner 적용
- 사용자 정보 받아오는 것을 mixin으로 만듦

### <막혔던 점>

- store에 isLoading값을 설정하고 spinner를 router의 berforeEnter에서 다루려고 했지만 잘 되지 않았다.

> 해결: 일단 myPage 부분에서 유저정보를 받아오기 전에 true로 놓고 받아오고 나서 false로 설정하여 해결하였다.

---

## 2021-09-16

### <활동>

- 사용자 정보 받아올 때 Spinner 적용 (App.vue에서 받아옴)
- 메인화면에서 방 리스트 불러오고 입장 시 비밀번호 입력하도록 구현

### <막혔던 점>

- Spinner를 적용할 때 각각 적용하면 됐지만, 매번 하는 것보단 이를 App.vue에 놓는 것이 효율적이라 생각해서 해봤지만 계속 에러가 발생했다.

> 해결: event bus를 이용해서 router의 beforeEnter에서 데이터를 불러올때 스피너를 시작하고 데이터를 다 가져오면 mounted에서 스피너를 종료시켰다.

---